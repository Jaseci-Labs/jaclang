<!DOCTYPE html><html><head><title>MTLLM API Documentation | SemRegistry, SemInfo, and SemScope</title><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><meta name="robots" content="index,follow"><meta name="theme-color" content="#212121"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><link href="https://fonts.googleapis.com/css?family=Hind:400,700&amp;display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:300,400&amp;display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/icon?family=Material+Icons%7CMaterial+Icons+Outlined&amp;display=swap" rel="stylesheet"><style>
      body, input, button {
        font-family: 'Hind', sans-serif;
      }

      code, .hljs {
        font-family: 'Source Code Pro', 'Courier New', Courier, monospace;
      }

      .icon-font {
        font-family: 'Material Icons';
        font-weight: normal;
        font-style: normal;
        font-size: 24px;  /* Preferred icon size */
        display: inline-block;
        line-height: 1;
        text-transform: none;
        letter-spacing: normal;
        word-wrap: normal;
        white-space: nowrap;
        direction: ltr;

        /* Support for all WebKit browsers. */
        -webkit-font-smoothing: antialiased;
        /* Support for Safari and Chrome. */
        text-rendering: optimizeLegibility;

        /* Support for Firefox. */
        -moz-osx-font-smoothing: grayscale;

        /* Support for IE. */
        font-feature-settings: 'liga';
      }

      .icon-font.outline {
        font-family: 'Material Icons Outlined';
      }
    </style><script src="https://cdn.jsdelivr.net/npm/mermaid@8.11.2/dist/mermaid.min.js"></script><script>mermaid.initialize({"startOnLoad":true});
                        window.addEventListener('navigation', () => { mermaid.init(); });
                        console.log('Mermaid Plugin Initialized');</script><link href="/mtllm/docs/assets/codedoc-styles.css" rel="stylesheet"><script async="" defer="" src="/mtllm/docs/assets/codedoc-bundle.js"></script></head><body><div class="header-0-0-9"><script async="" defer="" src="https://buttons.github.io/buttons.js"></script><a class="github-button" data-color-scheme="no-preference: light; light: light; dark: dark;" data-icon="false" data-show-count="true" data-size="false" href="https://github.com/Jaseci-Labs/mtllm/">Star</a><br><br></div><div id="-codedoc-container" class="container"><marker><!-- Designed and Implemented by Chandra Irugalbandara -->

</marker><h1 id="semregistry-seminfo-and-semscope" class="heading-0-0-15"><span class="anchor-0-0-16" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>SemRegistry, SemInfo, and SemScope</h1><h2 id="overview" class="heading-0-0-15"><span class="anchor-0-0-16" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>Overview</h2><p>The semantic registry system in the MTLLM framework consists of three main classes: <code>SemInfo</code>, <code>SemScope</code>, and <code>SemRegistry</code>. These classes work together to provide a structured way of storing and retrieving semantic information about various elements in a program. This document outlines the design and implementation details of each class.</p><div class="mermaid">sequenceDiagram
    participant C as Compiler
    participant R as SemRegistry
    participant S as SemScope
    participant I as SemInfo
    participant F as File System
    C-&gt;&gt;R: Initialize SemRegistry
    loop For each AST node
        C-&gt;&gt;R: Get or Create SemScope
        R-&gt;&gt;S: Create if not exists
        C-&gt;&gt;I: Create SemInfo
        C-&gt;&gt;S: Add SemInfo to SemScope
        S-&gt;&gt;I: Store SemInfo
    end
    C-&gt;&gt;R: Finalize Registry
    R-&gt;&gt;F: Save to Pickle File</div><h2 id="seminfo" class="heading-0-0-15"><span class="anchor-0-0-16" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>SemInfo</h2><h3 id="design" class="heading-0-0-15"><span class="anchor-0-0-16" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>Design</h3><p><code>SemInfo</code> is designed to encapsulate semantic information for individual elements in a program. It stores three key pieces of information:</p><ol><li><code>name</code>: The identifier of the element</li><li><code>type</code>: The type of the element (optional)</li><li><code>semstr</code>: A semantic string describing the element</li></ol><h3 id="implementation" class="heading-0-0-15"><span class="anchor-0-0-16" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>Implementation</h3><pre class="with-bar"><code class="python -codedoc-code-snippet code-0-0-2" tabindex="0"><span class="wmbar-0-0-7"><span></span><span></span><span></span><span></span></span><div class="line-0-0-6  -codedoc-code-line" data-content="class SemInfo:" id="code1-l1"><span class="lineCounter-0-0-3 prim -codedoc-line-counter">1<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">class</span> <span class="token class-name">SemInfo</span><span class="token punctuation">:</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="    def __init__(self, name: str, type: Optional[str] = None, semstr: str = &quot;&quot;) -> None:" id="code1-l2"><span class="lineCounter-0-0-3 -codedoc-line-counter">2<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">,</span> <span class="token builtin">type</span><span class="token punctuation">:</span> Optional<span class="token punctuation">[</span><span class="token builtin">str</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">None</span><span class="token punctuation">,</span> semstr<span class="token punctuation">:</span> <span class="token builtin">str</span> <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">None</span><span class="token punctuation">:</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="        self.name = name" id="code1-l3"><span class="lineCounter-0-0-3 -codedoc-line-counter">3<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        self<span class="token punctuation">.</span>name <span class="token operator">=</span> name</div><br><div class="line-0-0-6  -codedoc-code-line" data-content="        self.type = type" id="code1-l4"><span class="lineCounter-0-0-3 -codedoc-line-counter">4<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        self<span class="token punctuation">.</span><span class="token builtin">type</span> <span class="token operator">=</span> <span class="token builtin">type</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="        self.semstr = semstr" id="code1-l5"><span class="lineCounter-0-0-3 prim -codedoc-line-counter">5<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        self<span class="token punctuation">.</span>semstr <span class="token operator">=</span> semstr</div><br><div class="line-0-0-6  -codedoc-code-line" data-content="" id="code1-l6"><span class="lineCounter-0-0-3 -codedoc-line-counter">6<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="    def __repr__(self) -> str:" id="code1-l7"><span class="lineCounter-0-0-3 -codedoc-line-counter">7<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">def</span> <span class="token function">__repr__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">str</span><span class="token punctuation">:</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="        return f&quot;{self.semstr} ({self.type}) ({self.name})&quot;" id="code1-l8"><span class="lineCounter-0-0-3 prim -codedoc-line-counter">8<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token keyword">return</span> <span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>semstr<span class="token punctuation">}</span></span><span class="token string"> (</span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span><span class="token builtin">type</span><span class="token punctuation">}</span></span><span class="token string">) (</span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>name<span class="token punctuation">}</span></span><span class="token string">)"</span></span></div><br></code></pre><h4 id="key-features" class="heading-0-0-15"><span class="anchor-0-0-16" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>Key Features:</h4><ul><li>Simple initialization with optional <code>type</code> and <code>semstr</code></li><li>String representation includes all three attributes for easy debugging and display</li></ul><h2 id="semscope" class="heading-0-0-15"><span class="anchor-0-0-16" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>SemScope</h2><h3 id="design-1" class="heading-0-0-15"><span class="anchor-0-0-16" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>Design</h3><p><code>SemScope</code> represents a scope in the program, which can be nested. It includes:</p><ol><li><code>scope</code>: The name of the scope</li><li><code>type</code>: The type of the scope (e.g., "class", "function")</li><li><code>parent</code>: A reference to the parent scope (optional)</li></ol><p>Additional features include:</p><ul><li>String representation that shows the full scope hierarchy</li><li>Static method to create a <code>SemScope</code> from a string representation</li><li>Property to get the scope as a type string</li></ul><h3 id="implementation-1" class="heading-0-0-15"><span class="anchor-0-0-16" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>Implementation</h3><pre class="with-bar"><code class="python -codedoc-code-snippet code-0-0-2" tabindex="0"><span class="wmbar-0-0-7"><span></span><span></span><span></span><span></span></span><div class="line-0-0-6  -codedoc-code-line" data-content="class SemScope:" id="code2-l1"><span class="lineCounter-0-0-3 prim -codedoc-line-counter">1<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">class</span> <span class="token class-name">SemScope</span><span class="token punctuation">:</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="    def __init__(self, scope: str, type: str, parent: Optional[SemScope] = None) -> None:" id="code2-l2"><span class="lineCounter-0-0-3 -codedoc-line-counter">2<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> scope<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">,</span> <span class="token builtin">type</span><span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">,</span> parent<span class="token punctuation">:</span> Optional<span class="token punctuation">[</span>SemScope<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">None</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">None</span><span class="token punctuation">:</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="        self.parent = parent" id="code2-l3"><span class="lineCounter-0-0-3 -codedoc-line-counter">3<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        self<span class="token punctuation">.</span>parent <span class="token operator">=</span> parent</div><br><div class="line-0-0-6  -codedoc-code-line" data-content="        self.type = type" id="code2-l4"><span class="lineCounter-0-0-3 -codedoc-line-counter">4<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        self<span class="token punctuation">.</span><span class="token builtin">type</span> <span class="token operator">=</span> <span class="token builtin">type</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="        self.scope = scope" id="code2-l5"><span class="lineCounter-0-0-3 prim -codedoc-line-counter">5<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        self<span class="token punctuation">.</span>scope <span class="token operator">=</span> scope</div><br><div class="line-0-0-6  -codedoc-code-line" data-content="" id="code2-l6"><span class="lineCounter-0-0-3 -codedoc-line-counter">6<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="    def __str__(self) -> str:" id="code2-l7"><span class="lineCounter-0-0-3 -codedoc-line-counter">7<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">def</span> <span class="token function">__str__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">str</span><span class="token punctuation">:</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="        if self.parent:" id="code2-l8"><span class="lineCounter-0-0-3 -codedoc-line-counter">8<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token keyword">if</span> self<span class="token punctuation">.</span>parent<span class="token punctuation">:</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="            return f&quot;{self.parent}.{self.scope}({self.type})&quot;" id="code2-l9"><span class="lineCounter-0-0-3 -codedoc-line-counter">9<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>            <span class="token keyword">return</span> <span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>parent<span class="token punctuation">}</span></span><span class="token string">.</span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>scope<span class="token punctuation">}</span></span><span class="token string">(</span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span><span class="token builtin">type</span><span class="token punctuation">}</span></span><span class="token string">)"</span></span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="        return f&quot;{self.scope}({self.type})&quot;" id="code2-l10"><span class="lineCounter-0-0-3 prim -codedoc-line-counter">10<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token keyword">return</span> <span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>scope<span class="token punctuation">}</span></span><span class="token string">(</span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span><span class="token builtin">type</span><span class="token punctuation">}</span></span><span class="token string">)"</span></span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="" id="code2-l11"><span class="lineCounter-0-0-3 -codedoc-line-counter">11<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="    def __repr__(self) -> str:" id="code2-l12"><span class="lineCounter-0-0-3 -codedoc-line-counter">12<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">def</span> <span class="token function">__repr__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">str</span><span class="token punctuation">:</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="        return self.__str__()" id="code2-l13"><span class="lineCounter-0-0-3 -codedoc-line-counter">13<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token keyword">return</span> self<span class="token punctuation">.</span>__str__<span class="token punctuation">(</span><span class="token punctuation">)</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="" id="code2-l14"><span class="lineCounter-0-0-3 -codedoc-line-counter">14<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="    @staticmethod" id="code2-l15"><span class="lineCounter-0-0-3 prim -codedoc-line-counter">15<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token decorator annotation punctuation">@staticmethod</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="    def get_scope_from_str(scope_str: str) -> Optional[SemScope]:" id="code2-l16"><span class="lineCounter-0-0-3 -codedoc-line-counter">16<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">def</span> <span class="token function">get_scope_from_str</span><span class="token punctuation">(</span>scope_str<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> Optional<span class="token punctuation">[</span>SemScope<span class="token punctuation">]</span><span class="token punctuation">:</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="        scope_list = scope_str.split(&quot;.&quot;)" id="code2-l17"><span class="lineCounter-0-0-3 -codedoc-line-counter">17<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        scope_list <span class="token operator">=</span> scope_str<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="        parent = None" id="code2-l18"><span class="lineCounter-0-0-3 -codedoc-line-counter">18<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        parent <span class="token operator">=</span> <span class="token boolean">None</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="        for scope in scope_list:" id="code2-l19"><span class="lineCounter-0-0-3 -codedoc-line-counter">19<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token keyword">for</span> scope <span class="token keyword">in</span> scope_list<span class="token punctuation">:</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="            scope_name, scope_type = scope.split(&quot;(&quot;)" id="code2-l20"><span class="lineCounter-0-0-3 prim -codedoc-line-counter">20<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>            scope_name<span class="token punctuation">,</span> scope_type <span class="token operator">=</span> scope<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">"("</span><span class="token punctuation">)</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="            scope_type = scope_type[:-1]" id="code2-l21"><span class="lineCounter-0-0-3 -codedoc-line-counter">21<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>            scope_type <span class="token operator">=</span> scope_type<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="            parent = SemScope(scope_name, scope_type, parent)" id="code2-l22"><span class="lineCounter-0-0-3 -codedoc-line-counter">22<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>            parent <span class="token operator">=</span> SemScope<span class="token punctuation">(</span>scope_name<span class="token punctuation">,</span> scope_type<span class="token punctuation">,</span> parent<span class="token punctuation">)</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="        return parent" id="code2-l23"><span class="lineCounter-0-0-3 -codedoc-line-counter">23<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token keyword">return</span> parent</div><br><div class="line-0-0-6  -codedoc-code-line" data-content="" id="code2-l24"><span class="lineCounter-0-0-3 -codedoc-line-counter">24<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="    @property" id="code2-l25"><span class="lineCounter-0-0-3 prim -codedoc-line-counter">25<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token decorator annotation punctuation">@property</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="    def as_type_str(self) -> Optional[str]:" id="code2-l26"><span class="lineCounter-0-0-3 -codedoc-line-counter">26<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">def</span> <span class="token function">as_type_str</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> Optional<span class="token punctuation">[</span><span class="token builtin">str</span><span class="token punctuation">]</span><span class="token punctuation">:</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="        if self.type not in [&quot;class&quot;, &quot;node&quot;, &quot;obj&quot;]:" id="code2-l27"><span class="lineCounter-0-0-3 -codedoc-line-counter">27<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token keyword">if</span> self<span class="token punctuation">.</span><span class="token builtin">type</span> <span class="token keyword">not</span> <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token string">"class"</span><span class="token punctuation">,</span> <span class="token string">"node"</span><span class="token punctuation">,</span> <span class="token string">"obj"</span><span class="token punctuation">]</span><span class="token punctuation">:</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="            return None" id="code2-l28"><span class="lineCounter-0-0-3 -codedoc-line-counter">28<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>            <span class="token keyword">return</span> <span class="token boolean">None</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="        type_str = self.scope" id="code2-l29"><span class="lineCounter-0-0-3 -codedoc-line-counter">29<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        type_str <span class="token operator">=</span> self<span class="token punctuation">.</span>scope</div><br><div class="line-0-0-6  -codedoc-code-line" data-content="        node = self.parent" id="code2-l30"><span class="lineCounter-0-0-3 prim -codedoc-line-counter">30<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        node <span class="token operator">=</span> self<span class="token punctuation">.</span>parent</div><br><div class="line-0-0-6  -codedoc-code-line" data-content="        while node and node.parent:" id="code2-l31"><span class="lineCounter-0-0-3 -codedoc-line-counter">31<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token keyword">while</span> node <span class="token keyword">and</span> node<span class="token punctuation">.</span>parent<span class="token punctuation">:</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="            if node.type not in [&quot;class&quot;, &quot;node&quot;, &quot;obj&quot;]:" id="code2-l32"><span class="lineCounter-0-0-3 -codedoc-line-counter">32<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>            <span class="token keyword">if</span> node<span class="token punctuation">.</span><span class="token builtin">type</span> <span class="token keyword">not</span> <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token string">"class"</span><span class="token punctuation">,</span> <span class="token string">"node"</span><span class="token punctuation">,</span> <span class="token string">"obj"</span><span class="token punctuation">]</span><span class="token punctuation">:</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="                return type_str" id="code2-l33"><span class="lineCounter-0-0-3 -codedoc-line-counter">33<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>                <span class="token keyword">return</span> type_str</div><br><div class="line-0-0-6  -codedoc-code-line" data-content="            type_str = f&quot;{node.scope}.{type_str}&quot;" id="code2-l34"><span class="lineCounter-0-0-3 -codedoc-line-counter">34<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>            type_str <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{</span>node<span class="token punctuation">.</span>scope<span class="token punctuation">}</span></span><span class="token string">.</span><span class="token interpolation"><span class="token punctuation">{</span>type_str<span class="token punctuation">}</span></span><span class="token string">"</span></span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="            node = node.parent" id="code2-l35"><span class="lineCounter-0-0-3 prim -codedoc-line-counter">35<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>            node <span class="token operator">=</span> node<span class="token punctuation">.</span>parent</div><br><div class="line-0-0-6  -codedoc-code-line" data-content="        return type_str" id="code2-l36"><span class="lineCounter-0-0-3 prim -codedoc-line-counter">36<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token keyword">return</span> type_str</div><br></code></pre><h4 id="key-features-1" class="heading-0-0-15"><span class="anchor-0-0-16" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>Key Features:</h4><ul><li>Nested structure representation through the <code>parent</code> attribute</li><li>String representation shows the full scope hierarchy</li><li><code>get_scope_from_str</code> allows reconstruction of a <code>SemScope</code> hierarchy from a string</li><li><code>as_type_str</code> property provides a string representation of the scope as a type, useful for type checking and inference</li></ul><h2 id="semregistry" class="heading-0-0-15"><span class="anchor-0-0-16" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>SemRegistry</h2><h3 id="design-2" class="heading-0-0-15"><span class="anchor-0-0-16" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>Design</h3><p><code>SemRegistry</code> serves as the main container and manager for semantic information. It stores <code>SemInfo</code> objects organized by <code>SemScope</code>. Key features include:</p><ol><li>Storage of semantic information in a nested dictionary structure</li><li>Methods for adding new semantic information</li><li>Flexible lookup functionality</li><li>Utility methods for accessing and displaying the registry contents</li></ol><h3 id="implementation-2" class="heading-0-0-15"><span class="anchor-0-0-16" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>Implementation</h3><pre class="with-bar"><code class="python -codedoc-code-snippet code-0-0-2" tabindex="0"><span class="wmbar-0-0-7"><span></span><span></span><span></span><span></span></span><div class="line-0-0-6  -codedoc-code-line" data-content="class SemRegistry:" id="code3-l1"><span class="lineCounter-0-0-3 prim -codedoc-line-counter">1<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">class</span> <span class="token class-name">SemRegistry</span><span class="token punctuation">:</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="    def __init__(self) -> None:" id="code3-l2"><span class="lineCounter-0-0-3 -codedoc-line-counter">2<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">None</span><span class="token punctuation">:</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="        self.registry: dict[SemScope, list[SemInfo]] = {}" id="code3-l3"><span class="lineCounter-0-0-3 -codedoc-line-counter">3<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        self<span class="token punctuation">.</span>registry<span class="token punctuation">:</span> <span class="token builtin">dict</span><span class="token punctuation">[</span>SemScope<span class="token punctuation">,</span> <span class="token builtin">list</span><span class="token punctuation">[</span>SemInfo<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="" id="code3-l4"><span class="lineCounter-0-0-3 -codedoc-line-counter">4<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="    def add(self, scope: SemScope, seminfo: SemInfo) -> None:" id="code3-l5"><span class="lineCounter-0-0-3 prim -codedoc-line-counter">5<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">def</span> <span class="token function">add</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> scope<span class="token punctuation">:</span> SemScope<span class="token punctuation">,</span> seminfo<span class="token punctuation">:</span> SemInfo<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">None</span><span class="token punctuation">:</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="        for k in self.registry.keys():" id="code3-l6"><span class="lineCounter-0-0-3 -codedoc-line-counter">6<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token keyword">for</span> k <span class="token keyword">in</span> self<span class="token punctuation">.</span>registry<span class="token punctuation">.</span>keys<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="            if str(k) == str(scope):" id="code3-l7"><span class="lineCounter-0-0-3 -codedoc-line-counter">7<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>            <span class="token keyword">if</span> <span class="token builtin">str</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token builtin">str</span><span class="token punctuation">(</span>scope<span class="token punctuation">)</span><span class="token punctuation">:</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="                scope = k" id="code3-l8"><span class="lineCounter-0-0-3 -codedoc-line-counter">8<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>                scope <span class="token operator">=</span> k</div><br><div class="line-0-0-6  -codedoc-code-line" data-content="                break" id="code3-l9"><span class="lineCounter-0-0-3 -codedoc-line-counter">9<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>                <span class="token keyword">break</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="        else:" id="code3-l10"><span class="lineCounter-0-0-3 prim -codedoc-line-counter">10<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token keyword">else</span><span class="token punctuation">:</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="            self.registry[scope] = []" id="code3-l11"><span class="lineCounter-0-0-3 -codedoc-line-counter">11<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>            self<span class="token punctuation">.</span>registry<span class="token punctuation">[</span>scope<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="        self.registry[scope].append(seminfo)" id="code3-l12"><span class="lineCounter-0-0-3 -codedoc-line-counter">12<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        self<span class="token punctuation">.</span>registry<span class="token punctuation">[</span>scope<span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span>seminfo<span class="token punctuation">)</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="" id="code3-l13"><span class="lineCounter-0-0-3 -codedoc-line-counter">13<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="    def lookup(" id="code3-l14"><span class="lineCounter-0-0-3 -codedoc-line-counter">14<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">def</span> <span class="token function">lookup</span><span class="token punctuation">(</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="        self," id="code3-l15"><span class="lineCounter-0-0-3 prim -codedoc-line-counter">15<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        self<span class="token punctuation">,</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="        scope: Optional[SemScope] = None," id="code3-l16"><span class="lineCounter-0-0-3 -codedoc-line-counter">16<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        scope<span class="token punctuation">:</span> Optional<span class="token punctuation">[</span>SemScope<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">None</span><span class="token punctuation">,</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="        name: Optional[str] = None," id="code3-l17"><span class="lineCounter-0-0-3 -codedoc-line-counter">17<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        name<span class="token punctuation">:</span> Optional<span class="token punctuation">[</span><span class="token builtin">str</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">None</span><span class="token punctuation">,</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="        type: Optional[str] = None," id="code3-l18"><span class="lineCounter-0-0-3 -codedoc-line-counter">18<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token builtin">type</span><span class="token punctuation">:</span> Optional<span class="token punctuation">[</span><span class="token builtin">str</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">None</span><span class="token punctuation">,</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="    ) -> tuple[Optional[SemScope], Optional[SemInfo | list[SemInfo]]]:" id="code3-l19"><span class="lineCounter-0-0-3 -codedoc-line-counter">19<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">tuple</span><span class="token punctuation">[</span>Optional<span class="token punctuation">[</span>SemScope<span class="token punctuation">]</span><span class="token punctuation">,</span> Optional<span class="token punctuation">[</span>SemInfo <span class="token operator">|</span> <span class="token builtin">list</span><span class="token punctuation">[</span>SemInfo<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">:</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="        if scope:" id="code3-l20"><span class="lineCounter-0-0-3 prim -codedoc-line-counter">20<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token keyword">if</span> scope<span class="token punctuation">:</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="            for k, v in self.registry.items():" id="code3-l21"><span class="lineCounter-0-0-3 -codedoc-line-counter">21<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>            <span class="token keyword">for</span> k<span class="token punctuation">,</span> v <span class="token keyword">in</span> self<span class="token punctuation">.</span>registry<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="                if str(k) == str(scope):" id="code3-l22"><span class="lineCounter-0-0-3 -codedoc-line-counter">22<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>                <span class="token keyword">if</span> <span class="token builtin">str</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token builtin">str</span><span class="token punctuation">(</span>scope<span class="token punctuation">)</span><span class="token punctuation">:</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="                    if name:" id="code3-l23"><span class="lineCounter-0-0-3 -codedoc-line-counter">23<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>                    <span class="token keyword">if</span> name<span class="token punctuation">:</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="                        for i in v:" id="code3-l24"><span class="lineCounter-0-0-3 -codedoc-line-counter">24<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>                        <span class="token keyword">for</span> i <span class="token keyword">in</span> v<span class="token punctuation">:</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="                            if i.name == name:" id="code3-l25"><span class="lineCounter-0-0-3 prim -codedoc-line-counter">25<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>                            <span class="token keyword">if</span> i<span class="token punctuation">.</span>name <span class="token operator">==</span> name<span class="token punctuation">:</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="                                return k, i" id="code3-l26"><span class="lineCounter-0-0-3 -codedoc-line-counter">26<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>                                <span class="token keyword">return</span> k<span class="token punctuation">,</span> i</div><br><div class="line-0-0-6  -codedoc-code-line" data-content="                    elif type:" id="code3-l27"><span class="lineCounter-0-0-3 -codedoc-line-counter">27<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>                    <span class="token keyword">elif</span> <span class="token builtin">type</span><span class="token punctuation">:</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="                        for i in v:" id="code3-l28"><span class="lineCounter-0-0-3 -codedoc-line-counter">28<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>                        <span class="token keyword">for</span> i <span class="token keyword">in</span> v<span class="token punctuation">:</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="                            if i.type == type:" id="code3-l29"><span class="lineCounter-0-0-3 -codedoc-line-counter">29<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>                            <span class="token keyword">if</span> i<span class="token punctuation">.</span><span class="token builtin">type</span> <span class="token operator">==</span> <span class="token builtin">type</span><span class="token punctuation">:</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="                                return k, i" id="code3-l30"><span class="lineCounter-0-0-3 prim -codedoc-line-counter">30<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>                                <span class="token keyword">return</span> k<span class="token punctuation">,</span> i</div><br><div class="line-0-0-6  -codedoc-code-line" data-content="                    else:" id="code3-l31"><span class="lineCounter-0-0-3 -codedoc-line-counter">31<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>                    <span class="token keyword">else</span><span class="token punctuation">:</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="                        return k, v" id="code3-l32"><span class="lineCounter-0-0-3 -codedoc-line-counter">32<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>                        <span class="token keyword">return</span> k<span class="token punctuation">,</span> v</div><br><div class="line-0-0-6  -codedoc-code-line" data-content="        else:" id="code3-l33"><span class="lineCounter-0-0-3 -codedoc-line-counter">33<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token keyword">else</span><span class="token punctuation">:</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="            for k, v in self.registry.items():" id="code3-l34"><span class="lineCounter-0-0-3 -codedoc-line-counter">34<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>            <span class="token keyword">for</span> k<span class="token punctuation">,</span> v <span class="token keyword">in</span> self<span class="token punctuation">.</span>registry<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="                if name:" id="code3-l35"><span class="lineCounter-0-0-3 prim -codedoc-line-counter">35<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>                <span class="token keyword">if</span> name<span class="token punctuation">:</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="                    for i in v:" id="code3-l36"><span class="lineCounter-0-0-3 -codedoc-line-counter">36<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>                    <span class="token keyword">for</span> i <span class="token keyword">in</span> v<span class="token punctuation">:</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="                        if i.name == name:" id="code3-l37"><span class="lineCounter-0-0-3 -codedoc-line-counter">37<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>                        <span class="token keyword">if</span> i<span class="token punctuation">.</span>name <span class="token operator">==</span> name<span class="token punctuation">:</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="                            return k, i" id="code3-l38"><span class="lineCounter-0-0-3 -codedoc-line-counter">38<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>                            <span class="token keyword">return</span> k<span class="token punctuation">,</span> i</div><br><div class="line-0-0-6  -codedoc-code-line" data-content="                elif type:" id="code3-l39"><span class="lineCounter-0-0-3 -codedoc-line-counter">39<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>                <span class="token keyword">elif</span> <span class="token builtin">type</span><span class="token punctuation">:</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="                    for i in v:" id="code3-l40"><span class="lineCounter-0-0-3 prim -codedoc-line-counter">40<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>                    <span class="token keyword">for</span> i <span class="token keyword">in</span> v<span class="token punctuation">:</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="                        if i.type == type:" id="code3-l41"><span class="lineCounter-0-0-3 -codedoc-line-counter">41<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>                        <span class="token keyword">if</span> i<span class="token punctuation">.</span><span class="token builtin">type</span> <span class="token operator">==</span> <span class="token builtin">type</span><span class="token punctuation">:</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="                            return k, i" id="code3-l42"><span class="lineCounter-0-0-3 -codedoc-line-counter">42<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>                            <span class="token keyword">return</span> k<span class="token punctuation">,</span> i</div><br><div class="line-0-0-6  -codedoc-code-line" data-content="        return None, None" id="code3-l43"><span class="lineCounter-0-0-3 -codedoc-line-counter">43<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token keyword">return</span> <span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token boolean">None</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="" id="code3-l44"><span class="lineCounter-0-0-3 -codedoc-line-counter">44<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="    @property" id="code3-l45"><span class="lineCounter-0-0-3 prim -codedoc-line-counter">45<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token decorator annotation punctuation">@property</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="    def module_scope(self) -> SemScope:" id="code3-l46"><span class="lineCounter-0-0-3 -codedoc-line-counter">46<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">def</span> <span class="token function">module_scope</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> SemScope<span class="token punctuation">:</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="        for i in self.registry.keys():" id="code3-l47"><span class="lineCounter-0-0-3 -codedoc-line-counter">47<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> self<span class="token punctuation">.</span>registry<span class="token punctuation">.</span>keys<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="            if not i.parent:" id="code3-l48"><span class="lineCounter-0-0-3 -codedoc-line-counter">48<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>            <span class="token keyword">if</span> <span class="token keyword">not</span> i<span class="token punctuation">.</span>parent<span class="token punctuation">:</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="                break" id="code3-l49"><span class="lineCounter-0-0-3 -codedoc-line-counter">49<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>                <span class="token keyword">break</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="        return i" id="code3-l50"><span class="lineCounter-0-0-3 prim -codedoc-line-counter">50<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token keyword">return</span> i</div><br><div class="line-0-0-6  -codedoc-code-line" data-content="" id="code3-l51"><span class="lineCounter-0-0-3 -codedoc-line-counter">51<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="    def pp(self) -> None:" id="code3-l52"><span class="lineCounter-0-0-3 -codedoc-line-counter">52<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">def</span> <span class="token function">pp</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">None</span><span class="token punctuation">:</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="        for k, v in self.registry.items():" id="code3-l53"><span class="lineCounter-0-0-3 -codedoc-line-counter">53<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token keyword">for</span> k<span class="token punctuation">,</span> v <span class="token keyword">in</span> self<span class="token punctuation">.</span>registry<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="            print(k)" id="code3-l54"><span class="lineCounter-0-0-3 -codedoc-line-counter">54<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>            <span class="token keyword">print</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="            for i in v:" id="code3-l55"><span class="lineCounter-0-0-3 prim -codedoc-line-counter">55<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>            <span class="token keyword">for</span> i <span class="token keyword">in</span> v<span class="token punctuation">:</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="                print(f&quot;  {i.name} {i.type} {i.semstr}&quot;)" id="code3-l56"><span class="lineCounter-0-0-3 prim -codedoc-line-counter">56<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>                <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"  </span><span class="token interpolation"><span class="token punctuation">{</span>i<span class="token punctuation">.</span>name<span class="token punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token punctuation">{</span>i<span class="token punctuation">.</span><span class="token builtin">type</span><span class="token punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token punctuation">{</span>i<span class="token punctuation">.</span>semstr<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span></div><br></code></pre><h4 id="key-features-2" class="heading-0-0-15"><span class="anchor-0-0-16" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>Key Features:</h4><ul><li>Efficient storage using a dictionary with <code>SemScope</code> as keys and lists of <code>SemInfo</code> as values</li><li><code>add</code> method handles the case of existing scopes and adds new <code>SemInfo</code> objects to the appropriate list</li><li>Flexible <code>lookup</code> method allows searching by scope, name, or type, with various combinations</li><li><code>module_scope</code> property provides quick access to the top-level scope</li><li><code>pp</code> (pretty print) method for easy debugging and inspection of the registry contents</li></ul><h2 id="usage-and-interaction" class="heading-0-0-15"><span class="anchor-0-0-16" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>Usage and Interaction</h2><p>These classes work together to provide a comprehensive system for managing semantic information:</p><ol><li><code>SemInfo</code> objects are created to represent individual program elements.</li><li><code>SemScope</code> objects are created to represent the hierarchical structure of the program.</li><li><code>SemRegistry</code> is used to store and organize <code>SemInfo</code> objects within their respective <code>SemScope</code>s.</li><li>The <code>lookup</code> method of <code>SemRegistry</code> allows for flexible querying of semantic information based on various criteria.</li></ol><p>This system enables efficient storage and retrieval of semantic information, which is crucial for the MTLLM framework's ability to understand and reason about program structure and meaning during compilation and inference processes.</p><div class="contentnav-0-0-14" data-no-search=""><a href="#semregistry-seminfo-and-semscope" class="h1" data-content-highlight="semregistry-seminfo-and-semscope">SemRegistry, SemInfo, and SemScope</a><a href="#overview" class="h2" data-content-highlight="overview">Overview</a><a href="#seminfo" class="h2" data-content-highlight="seminfo">SemInfo</a><a href="#design" class="h3" data-content-highlight="design">Design</a><a href="#implementation" class="h3" data-content-highlight="implementation">Implementation</a><a href="#key-features" class="h4" data-content-highlight="key-features">Key Features:</a><a href="#semscope" class="h2" data-content-highlight="semscope">SemScope</a><a href="#design-1" class="h3" data-content-highlight="design-1">Design</a><a href="#implementation-1" class="h3" data-content-highlight="implementation-1">Implementation</a><a href="#key-features-1" class="h4" data-content-highlight="key-features-1">Key Features:</a><a href="#semregistry" class="h2" data-content-highlight="semregistry">SemRegistry</a><a href="#design-2" class="h3" data-content-highlight="design-2">Design</a><a href="#implementation-2" class="h3" data-content-highlight="implementation-2">Implementation</a><a href="#key-features-2" class="h4" data-content-highlight="key-features-2">Key Features:</a><a href="#usage-and-interaction" class="h2" data-content-highlight="usage-and-interaction">Usage and Interaction</a></div></div><div id="-codedoc-toc" class="toc-0-0-11"><script>
     if (window.matchMedia('(min-width: 1200px)').matches) {
       if (!localStorage.getItem('-codedoc-toc-active')) {
         localStorage.setItem('-codedoc-toc-active', "true");
       }
     }
     </script><div class="content-0-0-12"><p><a href="/mtllm/">Home</a></p><div class="collapse-0-0-8 "><script id="nJWgHWIfXj">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("nJWgHWIfXj", "BR5Z0MA6Aj4P2zER2ZLlUg==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); window.setImmediate = window.setImmediate || function(f){setTimeout(f, 0)}; })()</script><div class="label" onclick="this.parentElement.classList.toggle('open')"><span class="text">Quick Start</span><span class="icon-font closed">chevron_right</span></div><div class="content"><p><a href="/mtllm/docs/quickstart/installation">Installation</a>
<a href="/mtllm/docs/quickstart/minimal-working-example">Minimal Working Example</a></p></div></div><div class="collapse-0-0-8 "><script id="WCIJGUpoHe">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("WCIJGUpoHe", "BR5Z0MA6Aj4P2zER2ZLlUg==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); window.setImmediate = window.setImmediate || function(f){setTimeout(f, 0)}; })()</script><div class="label" onclick="this.parentElement.classList.toggle('open')"><span class="text">Design and Implementation</span><span class="icon-font closed">chevron_right</span></div><div class="content"><p><a href="/mtllm/docs/design-impl/sem_registry">SemRegistry</a>
<a href="/mtllm/docs/design-impl/inference_engine">Inference Engine</a></p></div></div><div class="collapse-0-0-8 "><script id="SLkWlnIsgO">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("SLkWlnIsgO", "BR5Z0MA6Aj4P2zER2ZLlUg==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); window.setImmediate = window.setImmediate || function(f){setTimeout(f, 0)}; })()</script><div class="label" onclick="this.parentElement.classList.toggle('open')"><span class="text">Building Blocks</span><span class="icon-font closed">chevron_right</span></div><div class="content"><p><a href="/mtllm/docs/building-blocks/language_models">Language Models</a>
<a href="/mtllm/docs/building-blocks/semstrings">Semstrings</a>
<a href="/mtllm/docs/building-blocks/functions_methods">Functions and Methods</a>
<a href="/mtllm/docs/building-blocks/object_init">Object Initialization</a>
<a href="/mtllm/docs/building-blocks/multimodality">Multimodality</a></p></div></div><div class="collapse-0-0-8 "><script id="hTQxVkvott">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("hTQxVkvott", "BR5Z0MA6Aj4P2zER2ZLlUg==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); window.setImmediate = window.setImmediate || function(f){setTimeout(f, 0)}; })()</script><div class="label" onclick="this.parentElement.classList.toggle('open')"><span class="text">Tutorials</span><span class="icon-font closed">chevron_right</span></div><div class="content"><p><a href="/mtllm/docs/tutorials/rpg_game">RPG Game Level Generation</a></p></div></div><div class="collapse-0-0-8 "><script id="VoAClNAPKX">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("VoAClNAPKX", "BR5Z0MA6Aj4P2zER2ZLlUg==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); window.setImmediate = window.setImmediate || function(f){setTimeout(f, 0)}; })()</script><div class="label" onclick="this.parentElement.classList.toggle('open')"><span class="text">API Reference</span><span class="icon-font closed">chevron_right</span></div><div class="content"><p><a href="/mtllm/docs/api/mtllm">MTLLM</a></p></div></div><div class="collapse-0-0-8 "><script id="cFFEoWokhP">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("cFFEoWokhP", "BR5Z0MA6Aj4P2zER2ZLlUg==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); window.setImmediate = window.setImmediate || function(f){setTimeout(f, 0)}; })()</script><div class="label" onclick="this.parentElement.classList.toggle('open')"><span class="text">Tips and Tricks</span><span class="icon-font closed">chevron_right</span></div><div class="content"><p><a href="/mtllm/docs/tips-n-tricks/existing_application">Using MTLLM in your existing Application</a>
<a href="/mtllm/docs/tips-n-tricks/when_to_use_semstrings">When to use Semstrings</a>
<a href="/mtllm/docs/tips-n-tricks/create_own_lm">Create your own Language Model</a></p></div></div><p><a href="/mtllm/docs/faqs">FAQs</a></p></div><div class="search-0-0-13"><script id="RDFJyVTRdB">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("RDFJyVTRdB", "CEp7LAl0nnWrqHIN8Qnt6g==", {"repo":"mtllm","user":"Jaseci-Labs","root":"docs/md","pick":"\\.md$","drop":"(^_)|(\\/_)"});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); window.setImmediate = window.setImmediate || function(f){setTimeout(f, 0)}; })()</script></div></div><div class="footer-0-0-10"><div class="left"><script id="rxFFjLVGci">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("rxFFjLVGci", "KKHOIeoEcuIIR8G+qI09PQ==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); window.setImmediate = window.setImmediate || function(f){setTimeout(f, 0)}; })()</script></div><div class="main"><div class="inside"><a href="https://github.com/Jaseci-Labs/mtllm/" target="_blank">GitHub</a></div></div><div class="right"><script id="IFYJtnchUT">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("IFYJtnchUT", "Xodqq8f8LP13F67p+cusew==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); window.setImmediate = window.setImmediate || function(f){setTimeout(f, 0)}; })()</script></div></div><script id="vWuuqEJFef">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("vWuuqEJFef", "3GUK3xGbIE9fCSzaoTX0bA==", {"namespace":"/mtllm"});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); window.setImmediate = window.setImmediate || function(f){setTimeout(f, 0)}; })()</script></body></html>